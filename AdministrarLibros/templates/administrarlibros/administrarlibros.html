{% extends "base/base.html" %}

{% load static %}

{% block content %}
    <link href="{% static 'Biblioteca/bootstrap.min.css' %}" rel="stylesheet"> 
    <link rel="stylesheet" href="{% static 'Biblioteca/css/StylesBase.css' %}">
    <link rel="stylesheet" href="{% static 'Biblioteca\css\StylesLibros.css' %}">
    <link rel="stylesheet" href="{% static 'Biblioteca\css\StylesTablas.css' %}">
    <script defer src="{% static 'Biblioteca\js\opciones.js' %}"></script>
    &nbsp;
    {% if user.is_authenticated %}
        <div class="opciones">
            <div class="box">
                <h1>¿Que actividad desea realizar?</h1>
            </div>
            <div class="box2">
                    <button onclick="MostrarIngresar()" class="ops">
                        Ingresar
                    </button>
                    <button onclick="MostrarEliminar()" class="ops">
                        Eliminar
                    </button>
                    <button onclick="MostrarEditar()" class="ops">
                        Editar
                    </button>
                    <button onclick="MostrarVisualizar()" class="ops">
                        Visualizar
                    </button>
            </div>
        </div>
    {% else %}
        <div class="opciones">
            <div class="box">
                <h1>¿Que actividad desea realizar?</h1>
            </div>
            <div class="box2">
                <button onclick="MostrarVisualizar()" class="ops">
                    Visualizar
                </button>
            </div>
        </div>        
    {% endif %}
        
        {% if "isvalid" in request.GET %} <!-- si se obtiene la redirección a la nueva url -->
            <p style="color: red; margin-left: 300px;">Libro ingresado correctamente</p>
        {% endif %}

        <center><div id = "Ingresar" class="ingresar" style="display: none;">
            <h2>Ingresando Nuevo Libro/Tesis</h2>
            <h3>Por favor complete los campos:</h3>
            <form method="POST">
                {% csrf_token %}
                <table>{{formL.as_table}}</table>
                <button class="ingresar-button" type="submit"><strong>Ingresar Libro</strong></button>
            </form>
        </div></center>

        <div id="Visualizar" class="visualizar" style="display: none;">
            <table>
                <thead>
                    <tr>
                        <th>Cota</th>
                        <th>Nombre</th>
                        <th>Autor</th>
                        <th>Tipo</th>
                        <th>Cantidad Interna</th>
                        <th>Cantidad Externa</th>
                        <th>Cantidad Total</th>
                        <th>Categoria/Tags</th>
                        <th>Fecha de Ingreso</th>
                        
                    </tr>
                </thead>
                <tbody>
                    {% for libro in libros %}
                        <tr>
                            <td>{{libro.id}}</td>
                            <td>{{libro.nombre}}</td>
                            <td>{{libro.autor}}</td>
                            <td>{{libro.tipo}}</td>
                            <td>{{libro.cantidadint}}</td>
                            <td>{{libro.cantidadext}}</td>
                            <td>{{libro.cantidadint|add:libro.cantidadext}}</td>
                            <td>{{libro.categoria}}</td>
                            <td>{{libro.fecha}}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div id="Eliminar" class="eliminar" style="display: none;">
            <table>
                <thead>
                    <tr>
                        <th>Cota</th>
                        <th>Nombre</th>
                        <th>Autor</th>
                        <th>Tipo</th>
                        <th>Cantidad Interna</th>
                        <th>Cantidad Externa</th>
                        <th>Cantidad Total</th>
                        <th>Categoria/Tags</th>
                        <th>Eliminar</th>
                        
                    </tr>
                </thead>
                <tbody>
                    {% for libro in libros %}
                        <tr>
                            <td>{{libro.id}}</td>
                            <td>{{libro.nombre}}</td>
                            <td>{{libro.autor}}</td>
                            <td>{{libro.tipo}}</td>
                            <td>{{libro.cantidadint}}</td>
                            <td>{{libro.cantidadext}}</td>
                            <td>{{libro.cantidadint|add:libro.cantidadext}}</td>
                            <td>{{libro.categoria}}</td>
                            <td><button class="fa-sharp fa-solid fa-trash-can fa-bounce" style="color: #ec1809;"></button></td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div id="Editar" class="editar" style="display: none;">
            <table>
                <thead>
                    <tr>
                        <th>Cota</th>
                        <th>Nombre</th>
                        <th>Autor</th>
                        <th>Tipo</th>
                        <th>Cantidad Interna</th>
                        <th>Cantidad Externa</th>
                        <th>Cantidad Total</th>
                        <th>Categoria/Tags</th>
                        <th>Editar</th>
                        
                    </tr>
                </thead>
                <tbody>
                    {% for libro in libros %}
                        <tr>
                            <td>{{libro.id}}</td>
                            <td>{{libro.nombre}}</td>
                            <td>{{libro.autor}}</td>
                            <td>{{libro.tipo}}</td>
                            <td>{{libro.cantidadint}}</td>
                            <td>{{libro.cantidadext}}</td>
                            <td>{{libro.cantidadint|add:libro.cantidadext}}</td>
                            <td>{{libro.categoria}}</td>
                            <td>IconoEditar</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    &nbsp;
{% endblock %}
